[workspace]
members = [
    "programs/nova_staking"
]
resolver = "2"

[profile.release]
overflow-checks = true
lto = "fat"
opt-level = 3

# Patches for Solana SBF compatibility (rustc 1.75.0)
# =================================================
# Problem: toml_parser v1.0.6 requires rustc >= 1.76, but Solana SBF uses rustc 1.75.0-dev
# 
# Dependency chain:
#   borsh-derive v1.6.0 -> proc-macro-crate v3.4.0 -> toml_edit v0.23.10 -> toml_parser v1.0.6 (MSRV 1.76!)
#
# Solution: Pin proc-macro-crate to v3.2.0 which uses toml_edit ^0.22.20 (MSRV 1.65)
[patch.crates-io]
proc-macro-crate = { git = "https://github.com/bkchr/proc-macro-crate", tag = "v3.2.0" }
