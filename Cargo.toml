[workspace]
members = [
    "programs/nova_staking"
]
resolver = "2"

[profile.release]
overflow-checks = true
lto = "fat"
opt-level = 3

# Patches for Solana SBF compatibility (rustc 1.75.0)
# =================================================
# Problem: toml_parser v1.0.6 requires rustc >= 1.76, but Solana SBF uses rustc 1.75.0-dev
# 
# Dependency chain:
#   borsh-derive v1.6.0 -> proc-macro-crate v3.4.0 -> toml_edit v0.23.10 -> toml_parser v1.0.6 (MSRV 1.76!)
#
# Solution: Pin toml_edit to v0.22.22 (MSRV 1.65) which doesn't use toml_parser
[patch.crates-io]
toml_edit = { git = "https://github.com/toml-rs/toml", tag = "v0.22.22" }
